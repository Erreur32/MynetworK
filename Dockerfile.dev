# ===========================================
# MynetworK - Development Dockerfile
# Node 22 Alpine - Hot Reload
# ===========================================

FROM node:22-alpine
# FROM node:20-alpine

WORKDIR /app

# Réduction du bruit npm en dev
ENV NODE_ENV=development
RUN npm config set fund false \
 && npm config set audit false

# Dépendances (dev + prod)
COPY package*.json ./
RUN npm ci

# Le code source sera monté via volume (docker-compose)
# => pas de COPY du code ici

# Ports :
# - Frontend (Vite) : 5173
# - Backend API     : 3003
EXPOSE 5173 3003

# Lancement dev (vite + api en watch)
CMD ["npm", "run", "dev"]
